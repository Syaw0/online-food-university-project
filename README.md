# سیستم سفارش آنلاین غذا (بخش فرانت اند)

**تیم پروژه**  **تاریخ: مرداد 1404**

## فهرست مطالب

- [مقدمه](#%D9%85%D9%82%D8%AF%D9%85%D9%87)
  - [بررسی پروژه](#%D8%A8%D8%B1%D8%B1%D8%B3%DB%8C%20%D9%BE%D8%B1%D9%88%DA%98%D9%87)
  - [هدف و اهداف](#%D9%87%D8%AF%D9%81%20%D9%88%20%D8%A7%D9%87%D8%AF%D8%A7%D9%81)
- [معماری سیستم و اجزا](#%D9%85%D8%B9%D9%85%D8%A7%D8%B1%DB%8C%20%D8%B3%DB%8C%D8%B3%D8%AA%D9%85%20%D9%88%20%D8%A7%D8%AC%D8%B2%D8%A7)
  - [معماری سطح بالا](#%D9%85%D8%B9%D9%85%D8%A7%D8%B1%DB%8C%20%D8%B3%D8%B7%D8%AD%20%D8%A8%D8%A7%D9%84%D8%A7)
  - [فناوری‌های استفاده شده](#%D9%81%D9%86%D8%A7%D9%88%D8%B1%DB%8C%E2%80%8C%D9%87%D8%A7%DB%8C%20%D8%A7%D8%B3%D8%AA%D9%81%D8%A7%D8%AF%D9%87%20%D8%B4%D8%AF%D9%87)
- [چیدمان پروژه](#%DA%86%DB%8C%D8%AF%D9%85%D8%A7%D9%86%20%D9%BE%D8%B1%D9%88%DA%98%D9%87)
- [اجزای سیستم](#%D8%A7%D8%AC%D8%B2%D8%A7%DB%8C%20%D8%B3%DB%8C%D8%B3%D8%AA%D9%85)
- [کاربران تستی برای تست پروژه](#%DA%A9%D8%A7%D8%B1%D8%A8%D8%B1%D8%A7%D9%86%20%D8%AA%D8%B3%D8%AA%DB%8C%20%D8%A8%D8%B1%D8%A7%DB%8C%20%D8%AA%D8%B3%D8%AA%20%D9%BE%D8%B1%D9%88%DA%98%D9%87)
- [راهنمای کاربر](#%D8%B1%D8%A7%D9%87%D9%86%D9%85%D8%A7%DB%8C%20%DA%A9%D8%A7%D8%B1%D8%A8%D8%B1)
  - [خریدار](#%D8%AE%D8%B1%DB%8C%D8%AF%D8%A7%D8%B1)
  - [فروشنده](#%D9%81%D8%B1%D9%88%D8%B4%D9%86%D8%AF%D9%87)
  - [پیک](#%D9%BE%DB%8C%DA%A9)
  - [مدیر](#%D9%85%D8%AF%DB%8C%D8%B1)
- [نحوه اجرای پروژه](#%D9%86%D8%AD%D9%88%D9%87%20%D8%A7%D8%AC%D8%B1%D8%A7%DB%8C%20%D9%BE%D8%B1%D9%88%DA%98%D9%87)
- [ساختار پروژه](#%D8%B3%D8%A7%D8%AE%D8%AA%D8%A7%D8%B1%20%D9%BE%D8%B1%D9%88%DA%98%D9%87)
- [نمای کلی سیستم](#%D9%86%D9%85%D8%A7%DB%8C%20%DA%A9%D9%84%DB%8C%20%D8%B3%DB%8C%D8%B3%D8%AA%D9%85)
- [نتیجه‌گیری و نکات تکمیلی](#%D9%86%D8%AA%DB%8C%D8%AC%D9%87%E2%80%8C%DA%AF%DB%8C%D8%B1%DB%8C%20%D9%88%20%D9%86%DA%A9%D8%A7%D8%AA%20%D8%AA%DA%A9%D9%85%DB%8C%D9%84%DB%8C)

## مقدمه

### بررسی پروژه

این پروژه یک سیستم سفارش آنلاین غذا است که به کاربران امکان می‌دهد از رستوران‌های مختلف غذا سفارش دهند، وضعیت سفارشات خود را پیگیری کنند و نظرات خود را ثبت کنند. این سیستم به‌عنوان یک پروژه دانشگاهی طراحی شده و برای مدیریت تعاملات بین کاربران مختلف توسعه یافته است.

### هدف و اهداف

هدف این پروژه ارائه یک پلتفرم جامع و کاربرپسند برای سفارش غذا است که نیازهای خریداران، فروشندگان (رستوران‌ها)، پیک‌ها و مدیران را برآورده کند. این سیستم باید قابل اعتماد، کارآمد و ساده برای استفاده باشد و تجربه‌ای یکپارچه برای همه کاربران فراهم کند.


## معماری سیستم و اجزا

این پروژه **صرفاً از سمت کاربر (فرانت‌اند)** تشکیل شده است. تمامی منطق و داده‌ها به‌صورت محلی در داخل برنامه نگهداری می‌شوند (برای مثال با استفاده از کلاس‌های Repository) . کاربران از طریق رابط گرافیکی **JavaFX** با سیستم تعامل دارند؛ به‌طوری که هر نقش (خریدار، فروشنده، پیک، مدیر) یک پنل یا داشبورد مخصوص خود دارد.

### معماری سطح بالا

این سیستم از معماری MVC (Model-View-Controller) استفاده می‌کند:
- **Model**: داده‌ها و منطق کسب‌وکار را مدیریت می‌کند (مانند `User`, `Restaurant`, `Order`).
- **View**: رابط کاربری را ارائه می‌دهد (با استفاده از JavaFX).
- **Controller**: تعاملات کاربر و منطق برنامه را کنترل می‌کند (مانند `AuthController`).

### فناوری‌های استفاده شده

- **Java 23**: زبان اصلی برنامه‌نویسی.
- **JavaFX 24.0.2**: برای طراحی رابط کاربری.
- **Maven**: برای مدیریت پروژه و وابستگی‌ها.


## چیدمان پروژه

ساختار دایرکتوری پروژه به شرح زیر است:
- `src/main/java/app/`:
  - `controllers/`: شامل کنترلرهای برنامه مانند `AuthController`.
  - `models/`: شامل کلاس‌های مدل مانند `User`, `Restaurant`, `Food`, `Order`.
  - `views/`: شامل فایل‌های رابط کاربری.
    - `pages/`: صفحات اختصاصی برای نقش‌های کاربر (مانند `buyer`, `seller`).
    - `component/`: کامپوننت‌های قابل استفاده مجدد UI.
    - `layout/`: ساختارهای چیدمان رابط کاربری.
    - `forms/`: فرم‌های احراز هویت (مانند ورود و ثبت‌نام).
  - `states/`: مدیریت وضعیت برنامه (مانند `UserState`, `OrderState`).
  - `mock/`: مخزن‌های داده فیک برای تست (مانند `RestaurantRepo`).
  - `utils/`: ابزارهای کمکی.


## اجزای سیستم

سیستم از ماژول‌های زیر تشکیل شده است:
- **مدیریت کاربر**: ثبت‌نام، ورود و مدیریت پروفایل کاربران.
- **مدیریت رستوران**: افزودن، ویرایش و حذف رستوران‌ها و منوها.
- **پردازش سفارش**: ایجاد، پیگیری و تحویل سفارشات.
- **مدیریت نظرات**: ثبت و نمایش نظرات کاربران.
- **مدیریت اعلان‌ها**: ارسال اعلان به کاربران در مراحل مختلف سفارش.

**نحوه تعامل اجزا**:    
وقتی خریدار سفارشی ثبت می‌کند، سیستم آن را در وضعیت "معلق" قرار می‌دهد. فروشنده سفارش را مشاهده کرده و وضعیت را به "در حال آماده‌سازی" تغییر می‌دهد. پس از آماده‌سازی، پیک سفارش را پذیرفته و وضعیت را به "در حال تحویل" به‌روزرسانی می‌کند. پس از تحویل، وضعیت به "تکمیل شده" تغییر می‌یابد.


## کاربران تستی برای تست پروژه

- کاربر : **خریدار**
  - شماره همراه: `09001234367`
  - رمز عبور: `123`
- کاربر : **فروشنده(رستوران دار)**
  - شماره همراه: `09129876544`
  - رمز عبور: `123`
- کاربر : **پیک**
  - شماره همراه: `09129876543`
  - رمز عبور: `123`
- کاربر : **ادمین و مدیریت سایت**
  - شماره همراه: `09001234567`
  - رمز عبور: `123`

## راهنمای کاربر

### خریدار
1. ورود با شماره تماس و رمز عبور.
2. مشاهده لیست رستوران‌ها.
3. انتخاب رستوران و مشاهده منو.
4. افزودن آیتم‌ها به سبد خرید.
5. ثبت سفارش.
6. پیگیری وضعیت سفارش.

### فروشنده
1. ورود به سیستم.
2. مدیریت جزئیات رستوران (نام، آدرس و غیره).
3. مدیریت آیتم‌های منو (افزودن، حذف).
4. مشاهده سفارشات معلق.
5. به‌روزرسانی وضعیت سفارشات.

### پیک
1. ورود به سیستم.
2. مشاهده سفارشات اختصاص‌یافته.
3. به‌روزرسانی وضعیت تحویل (مانند "تحویل شده").

### مدیر
1. ورود به سیستم.
2. مدیریت کاربران (حذف یا ویرایش حساب‌ها).
3. مشاهده وضعیت سیستم.
4. مدیریت تیکت‌های پشتیبانی.
5. مشاهده گزارش‌های فروش.


## نحوه اجرای پروژه

برای اجرای پروژه، از اسکریپت `run.sh` استفاده کنید:
1. در ترمینال به دایرکتوری پروژه بروید.
2. دستور زیر را اجرا کنید:
```bash  
   ./run.sh  
   ```
این اسکریپت:
- دایرکتوری `out` را پاک می‌کند.
- فایل‌های Java را کامپایل می‌کند.
- برنامه را با JavaFX اجرا می‌کند.

**نکته**: مطمئن شوید مسیر JavaFX در سیستم شما به‌درستی تنظیم شده است.


## ساختار پروژه

پروژه از ساختار **Maven** استفاده می‌کند و در ریشه شامل فایل‌های پیکربندی زیر است:

- **فایل `pom.xml`:** فایل پیکربندی Maven است که مشخصات پروژه (مانند `groupId`, `artifactId`, نسخه جاوا و نسخه JavaFX) را تعیین می‌کند. در این فایل وابستگی‌های پروژه نیز لیست شده‌اند. برای نمونه، استفاده از ماژول‌های JavaFX با `javafx-controls` و `javafx-fxml` مشخص شده است. همچنین یک کتابخانه JSON به‌صورت اختیاری برای پردازش داده‌ها اضافه شده است. در بخش `<build>`، پلاگین `javafx-maven-plugin` تعریف شده تا امکان بیلد و اجرای آسان برنامه با Maven فراهم شود.

- **فایل `postcss.config.js`:** این فایل مربوط به پیکربندی ابزار PostCSS است که در پروژه برای پردازش فایل‌های CSS استفاده می‌شود. در آن پلاگین‌های PostCSS مانند `postcss-import` و `postcss-css-variables` تعریف شده‌اند تا تغییراتی مثل وارد کردن فایل‌ها یا متغیرهای CSS پیش از اجرای برنامه انجام شود.

- **فایل `run.sh`:** اسکریپت شل برای ساخت و اجرای پروژه بر روی سیستم‌های شبه‌لینوکس است. در این اسکریپت ابتدا متغیر `PATH_TO_FX` برای مسیر کتابخانه‌های JavaFX تنظیم شده است. سپس در پوشهٔ `out/` دایرکتوری خروجی ساخته می‌شود، منابع (مانند تصاویر و CSS) کپی می‌شوند و فایل `style.css` با دستور `npx postcss` پردازش می‌شود. پس از آن با دستور `javac` تمام کلاس‌های جاوا کامپایل شده و با `java` برنامه اجرا می‌شود.

- **سایر فایل‌های کلیدی:** در پوشه `src/main/java/app` کدهای اصلی پروژه قرار دارند. به‌عنوان مثال فایل `Main.java` نقطهٔ ورودی برنامه است. ساختار پوشه‌های داخلی به صورت زیر است:

  - `app/models/`: کلاس‌های مدل مانند `User.java`, `Food.java`, `Order.java` و غیره.

  - `app/controllers/`: کنترلرهای رابط کاربری (مثلاً `AuthController.java` برای ورود/ثبت‌نام).

  - `app/views/`: شامل صفحات مختلف رابط گرافیکی، که به تفکیک هر نقش در پوشه‌های `buyer/`, `seller/`, `delivery/`, `admin/` و اجزای مشترک (`shared/`) قرار دارند.

  - `app/views/layout/`: کلاس‌های مربوط به لایه‌بندی صفحات (مانند پنل ورود `AuthLayout.java` و داشبورد اصلی `DashboardLayout.java` و ناوبری‌های هر نقش).

  - `app/states/`: مدیریت وضعیت برنامه (مانند `UserState.java`, `OrderState.java` و غیره) و `StateManager.java` برای هماهنگ‌سازی این وضعیت‌ها.

  - `app/mock/`: شبیه‌سازهای داده (Repository) که داده‌های فرضی را تامین می‌کنند (مانند `RestaurantRepo.java`، `FoodRepo.java`، `OrderRepo.java` و ...). این بخش نقش بک‌اند را در برنامه شبیه‌سازی می‌کند.

  - `app/utils/` و `app/component/` نیز کلاس‌های کمکی (اعتبارسنجی، فرم‌ها، دیالوگ‌ها و غیره) و کامپوننت‌های رابط کاربری مشترک را شامل می‌شوند.

- **دایرکتوری `src/main/resources/assets`:** شامل فایل‌های استایل CSS و تصاویر برنامه است. فایل‌های `style.css`, `dashboard.css` و سایر CSS ها در این مسیر قرار دارند و تصاویر (مانند لوگو، تصاویر پس‌زمینه و آیکون‌ها) در پوشه‌های زیرمجموعه `images/` نگهداری می‌شوند. فونت‌های مورد استفاده نیز در این پوشه قرار دارند.


## نمای کلی سیستم
عملکرد کلی سیستم از زمان ثبت سفارش توسط خریدار تا تحویل نهایی توسط پیک به شرح زیر است:

- **خریدار**: ابتدا به صفحه لیست رستوران‌ها می‌رود `RestaurantListPage` و رستوران دلخواه را انتخاب می‌کند. سپس غذای مورد نظر را به سبد خرید اضافه می‌کند `CartPage` و سفارش را نهایی می‌کند. پس از ثبت سفارش، وضعیت سفارش به سمت رستوران ارسال می‌شود. خریدار می‌تواند فهرست سفارش‌های در حال انجام یا تکمیل‌شده خود را در پنل خریداری مشاهده نماید.
- **فروشنده/رستوران**: پس از ثبت سفارش توسط خریدار، در داشبورد فروشنده `SellerDashboardPage` لیستی از سفارش‌های جدید دریافت می‌کند. فروشنده سفارش را تأیید کرده و پس از آماده‌سازی غذا، وضعیت آن را به «آماده برای تحویل» تغییر می‌دهد. سفارش‌های در حال انجام و تکمیل‌شده در صفحات مختلف فروشنده قابل مشاهده هستند. همچنین فروشنده می‌تواند لیست غذاها `FoodListPage`را مدیریت کرده و اطلاعات رستوران را ویرایش کند.
- **پیک**: زمانی که سفارش به مرحله تحویل می‌رسد، در داشبورد پیک `DeliveryDashboardPage` لیستی از سفارش‌های آماده‌شده نشان داده می‌شود. پیک پس از تحویل غذا به مشتری، وضعیت سفارش را به “تکمیل‌شده” تغییر می‌دهد. پیک نیز می‌تواند تاریخچه سفارش‌های خود را در پنل مربوطه مشاهده کند.
- **مدیر**: مدیر کل سیستم در پنل مدیریت (`AdminInProgressOrderListPage` و دیگر صفحات) می‌تواند همه سفارش‌ها را رصد کند. او لیست سفارش‌های در حال انجام کل سیستم، گزارش‌های فروش، مشکلات ثبت‌شده `تیکت‌ها` و لیست کاربران را می‌بیند. مدیر می‌تواند در صورت لزوم تیکت جدید ایجاد کند یا سیستم را مانیتورینگ کند.

بنابراین، جریان کلی اطلاعات این است که خریدار سفارش را ثبت می‌کند، فروشنده آن را پردازش می‌کند و پیک تحویل را انجام می‌دهد. در تمام مراحل، وضعیت‌ها و داده‌ها در لایه‌های States برنامه به‌روزرسانی شده و در رابط کاربری بازتاب می‌یابند.

## نتیجه‌گیری و نکات تکمیلی

- **خلاصه**: این پروژه یک سیستم سفارش آنلاین غذا را با موفقیت پیاده‌سازی کرده که نیازهای کاربران مختلف را برآورده می‌کند.
- **اهداف آموزشی:** این پروژه با هدف تمرین طراحی رابط کاربری گرافیکی با `JavaFX` و آشنایی با مفاهیم معماری فرانت‌اند (مدل-نما-کنترلر، مدیریت وضعیت) انجام شده است. استفاده از فایل‌های CSS و تصویرسازی در UI نیز از نکات فنی مورد توجه است. همچنین پیاده‌سازی مفاهیم کاربردی همچون احراز هویت، مدیریت نقش‌ها و نمایش گزارش‌ها در پروژه گنجانده شده است.
- **فناوری‌ها و نکات فنی:** پروژه با جاوا نسخه ۲۳ و کتابخانه `JavaFX 24` ساخته شده است. فایل‌های `CSS` با استفاده از `PostCSS` و `Node.js `پردازش می‌شوند. در پروژه از **JavaFX Maven Plugin** برای سهولت بیلد استفاده شده است. داده‌ها به‌صورت محلی (Mock) نگهداری می‌شوند و به همین دلیل نیازی به سرویس‌دهنده واقعی وجود ندارد.
- **چالش‌ها و دستاوردها:** کار با `JavaFX` و پیاده‌سازی رابط کاربری پویا تجربه ارزشمندی بود. نحوه جداسازی لایه‌های پروژه (مدل، کنترلر، نما) و استفاده از کلاس‌های `State` برای مدیریت اطلاعات، از نکات مهم این پروژه است. به‌علاوه، ترکیب ابزارهای توسعه وب (مانند `PostCSS`) با اپلیکیشن دسکتاپ، نشان‌دهنده‌ی قابلیت‌های ترکیبی پروژه می‌باشد.